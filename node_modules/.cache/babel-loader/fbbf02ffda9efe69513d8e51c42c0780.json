{"remainingRequest":"E:\\zhongqiyan\\conmuser_data\\node_modules\\babel-loader\\lib\\index.js!E:\\zhongqiyan\\conmuser_data\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\zhongqiyan\\conmuser_data\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\zhongqiyan\\conmuser_data\\src\\views\\HomepagePictures\\homePagePictures.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\zhongqiyan\\conmuser_data\\src\\views\\HomepagePictures\\homePagePictures.vue","mtime":1591944345010},{"path":"E:\\zhongqiyan\\conmuser_data\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\conmuser_data\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\conmuser_data\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\conmuser_data\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRTovemhvbmdxaXlhbi9jb25tdXNlcl9kYXRhL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGh0dHByZXF1ZXN0IGZyb20gJ0AvYXNzZXRzL2FwaS9yZXF1ZXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZVVybDogJycKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pZkltYWdlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmn6Xor6LmmK/lkKbmnInlm77niYcKICAgIGlmSW1hZ2U6IGZ1bmN0aW9uIGlmSW1hZ2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBodHRwcmVxdWVzdC5nZXQoJy9jb21tb24vaW1hZ2VzJywge30sIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZygn5rWL6K+V6L+Z5LiqJywgcmVzKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhLm9rKSB7CiAgICAgICAgICBfdGhpcy5pbWFnZVVybCA9IHJlcy5kYXRhLmRhdGFbMF0uZmlsZXVybDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4iuS8oOWbvueJhwogICAgdXBsb2FkSW1hZ2U6IGZ1bmN0aW9uIHVwbG9hZEltYWdlKGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coJ+a1i+ivleS4iuS8oOWbvueJhycsIGRhdGEpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICJmaWxldXJsIjogZGF0YS5kYXRhLmRhdGEudXJsCiAgICAgIH07CiAgICAgIGh0dHByZXF1ZXN0LnBvc3QoJy9jb21tb24vaW1hZ2VzJywgb3B0aW9ucywgZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKCfmtYvor5XkuIrkvKDmlofku7bmiJAnLCByZXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEub2spIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aWsOWinuaIkOWKnycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOabtOaWsOWbvueJhwogICAgdXBkYXRlSW1hZ2U6IGZ1bmN0aW9uIHVwZGF0ZUltYWdlKGRhdGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCfmm7TmlrDlm77niYcnLCBkYXRhKTsKICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgImZpbGV1cmwiOiBkYXRhLmRhdGEuZGF0YS51cmwsCiAgICAgICAgJ2lkJzogZGF0YS5kYXRhLmRhdGEuaWQKICAgICAgfTsKICAgICAgaHR0cHJlcXVlc3QucHV0KCcvY29tbW9uL2ltYWdlcycsIG9wdGlvbnMsIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZygn5rWL6K+V5pu05paw5paH5Lu25oiQ5YqfJywgcmVzKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhLm9rKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDmiJDlip8nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyAvLyDkuIrkvKDmiJDlip/lkI4KICAgIC8vIGhhbmRsZUF2YXRhclN1Y2Nlc3MgKHJlcywgZmlsZSkgewogICAgLy8gICBjb25zb2xlLmxvZygn5rWL6K+VcmVzJywgcmVzLCBmaWxlKQogICAgLy8gICAvLyB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlLnJhdyk7CiAgICAvLyAgIGxldCBfdGhpcyA9IHRoaXMKICAgIC8vICAgaWYgKF90aGlzLmltYWdlVXJsICE9PSAnJykgewogICAgLy8gICAgIF90aGlzLnVwZGF0ZUltYWdlKHJlcykKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICBfdGhpcy51cGxvYWRJbWFnZShyZXMpCiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICAvLyDkuIrkvKDkuYvlkI4KICAgIGJlZm9yZUF2YXRhclVwbG9hZDogZnVuY3Rpb24gYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZyc7CiAgICAgIHZhciBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CgogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJyk7CiAgICAgIH0KCiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0sCiAgICB1cGxvYWRSZXF1ZXN0OiBmdW5jdGlvbiB1cGxvYWRSZXF1ZXN0KHBhcm1lcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzLCBuZXdGaWxlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcyA9IF90aGlzMjsKICAgICAgICAgICAgICAgIG5ld0ZpbGUgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIG5ld0ZpbGUuYXBwZW5kKCdmaWxlJywgcGFybWVzLmZpbGUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gaHR0cHJlcXVlc3QucG9zdEZpbGUoJy91cGxvYWQnLCBuZXdGaWxlLCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmtYvor5VyZXPkuIrkvKAnLCByZXMpOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmltYWdlVXJsICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlSW1hZ2UocmVzKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkSW1hZ2UocmVzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["homePagePictures.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"homePagePictures\">\r\n    <el-upload class=\"avatar-uploader\"\r\n               action=\"\"\r\n               :show-file-list=\"false\"\r\n               :before-upload=\"beforeAvatarUpload\"\r\n               :http-request=\"uploadRequest\">\r\n      <img v-if=\"imageUrl\"\r\n           :src=\"imageUrl\"\r\n           class=\"avatar\">\r\n      <i v-else\r\n         class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n    </el-upload>\r\n  </div>\r\n</template>\r\n<script>\r\nimport httprequest from '@/assets/api/request'\r\nexport default {\r\n  data () {\r\n    return {\r\n      imageUrl: ''\r\n    }\r\n  },\r\n  mounted () {\r\n    this.ifImage()\r\n  },\r\n  methods: {\r\n    // 查询是否有图片\r\n    ifImage () {\r\n      let _this = this\r\n      httprequest.get('/common/images', {}, res => {\r\n        console.log('测试这个', res)\r\n        if (res.data.ok) {\r\n          _this.imageUrl = res.data.data[0].fileurl\r\n        }\r\n      })\r\n    },\r\n    // 上传图片\r\n    uploadImage (data) {\r\n      console.log('测试上传图片', data)\r\n      let _this = this\r\n      let options = {\r\n        \"fileurl\": data.data.data.url\r\n      }\r\n      httprequest.post('/common/images', options, res => {\r\n        console.log('测试上传文件成', res)\r\n        if (res.data.ok) {\r\n          _this.$message.success('新增成功')\r\n        } else {\r\n          _this.$message.error(res.data.message)\r\n        }\r\n      })\r\n    },\r\n    // 更新图片\r\n    updateImage (data) {\r\n      let _this = this\r\n      console.log('更新图片', data)\r\n      let options = {\r\n        \"fileurl\": data.data.data.url,\r\n        'id': data.data.data.id\r\n      }\r\n      httprequest.put('/common/images', options, res => {\r\n        console.log('测试更新文件成功', res)\r\n        if (res.data.ok) {\r\n          _this.$message.success('更新成功')\r\n        } else {\r\n          _this.$message.error(res.data.message)\r\n        }\r\n      })\r\n    },\r\n    // // 上传成功后\r\n    // handleAvatarSuccess (res, file) {\r\n    //   console.log('测试res', res, file)\r\n    //   // this.imageUrl = URL.createObjectURL(file.raw);\r\n    //   let _this = this\r\n    //   if (_this.imageUrl !== '') {\r\n    //     _this.updateImage(res)\r\n    //   } else {\r\n    //     _this.uploadImage(res)\r\n    //   }\r\n    // },\r\n    // 上传之后\r\n    beforeAvatarUpload (file) {\r\n      const isJPG = file.type === 'image/jpeg';\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    async  uploadRequest (parmes) {\r\n      let _this = this\r\n      let newFile = new FormData()\r\n      newFile.append('file', parmes.file)\r\n      await httprequest.postFile('/upload', newFile, res => {\r\n        console.log('测试res上传', res)\r\n        if (res.data.ok) {\r\n          if (_this.imageUrl !== '') {\r\n            _this.updateImage(res)\r\n          } else {\r\n            _this.uploadImage(res)\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.avatar-uploader {\r\n  width: 80%;\r\n  height: 80%;\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  i {\r\n    width: 100%;\r\n    font-size: 300px;\r\n    color: #8c939d;\r\n    text-align: center;\r\n    line-height: 100%;\r\n  }\r\n  .el-upload {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n}\r\n#homePagePictures {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  .avatar {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n}\r\n</style>"],"sourceRoot":"src/views/HomepagePictures"}]}