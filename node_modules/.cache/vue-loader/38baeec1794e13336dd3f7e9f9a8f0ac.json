{"remainingRequest":"E:\\gitHub\\home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\gitHub\\home\\src\\views\\Import\\import.vue?vue&type=style&index=0&id=5a617605&lang=scss&scoped=true&","dependencies":[{"path":"E:\\gitHub\\home\\src\\views\\Import\\import.vue","mtime":1592985317378},{"path":"E:\\gitHub\\home\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitHub\\home\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\gitHub\\home\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\gitHub\\home\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitHub\\home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitHub\\home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNob21lUGFnZVBpY3R1cmVzIHsNCiAgd2lkdGg6IDk2JTsNCiAgaGVpZ2h0OiA5NiU7DQogIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogIG1hcmdpbjogMC41JSBhdXRvOw0KICAudG9wU2hvdyB7DQogICAgaGVpZ2h0OiA4MHB4Ow0KICAgIC50b3BMZWZ0IHsNCiAgICAgIGZsb2F0OiBsZWZ0Ow0KICAgICAgbWFyZ2luLWxlZnQ6IDI0cHg7DQogICAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgIH0NCiAgICAudG9wUmlnaHQgew0KICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiAyNHB4Ow0KICAgICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICAgIC51cGxvYWQtZGVtbyB7DQogICAgICAgIGZsb2F0OiBsZWZ0Ow0KICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["import.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"import.vue","sourceRoot":"src/views/Import","sourcesContent":["<template>\r\n  <div id=\"homePagePictures\">\r\n    <el-row class=\"topShow\">\r\n\r\n      <div class=\"topLeft\">\r\n        <el-button icon=\"el-icon-plus\"\r\n                   class=\"createMaterial\"\r\n                   type=\"primary\"\r\n                   @click=\"createForm\">新建</el-button>\r\n      </div>\r\n      <div class=\"topRight\">\r\n        <el-upload class=\"upload-demo\"\r\n                   action=\"\"\r\n                   :http-request=\"uploadFile\"\r\n                   :show-file-list=\"false\">\r\n          <el-button type=\"primary\">导入</el-button>\r\n        </el-upload>\r\n        <!-- <el-button type=\"primary\">导入</el-button> -->\r\n        <el-button plain\r\n                   type=\"primary\"\r\n                   @click=\"download\">下载模板</el-button>\r\n        <el-button plain\r\n                   type=\"danger\"\r\n                   @click=\"deleteAll(ids)\">批量删除</el-button>\r\n      </div>\r\n    </el-row>\r\n    <el-row>\r\n      <componentsTable :tableSelection=\"showSelection\"\r\n                       :tableData=\"tableData\"\r\n                       :operation='operation'\r\n                       :operationWidth=\"operationWidth\"\r\n                       :tableIndex=\"tableIndex\"\r\n                       :tableHead=\"tableHead\"\r\n                       :border=\"true\"\r\n                       :pageTotal=\"pageTotal\"\r\n                       :maxHeight=\"maxHeight\"\r\n                       :operationArr=\"operationArr\"\r\n                       @choseselection=\"selctionChose\"\r\n                       @buttonclick=\"clickButton\"\r\n                       @changnum='changeNumber'\r\n                       @changpage=\"changePage\"></componentsTable>\r\n    </el-row>\r\n    <formDialog ref=\"fromDialog\"\r\n                :ruleForm=\"ruleForm\"\r\n                @submit=\"createImport\"\r\n                @editform=\"edit\"\r\n                :rulesNow='rules'\r\n                :isCreate=\"isCreate\"></formDialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport httprequest from '@/assets/api/request'\r\nimport componentsTable from '@/components/table/componentsTable'\r\n// import formDialog from '@/components/dialog/formDialog'\r\nimport formDialog from '@/components/dialog/form'\r\nexport default {\r\n  components: { componentsTable, formDialog },\r\n  data () {\r\n    return {\r\n      tableData: [],\r\n      showSelection: true,\r\n      operation: true,\r\n      operationWidth: 130,\r\n      tableIndex: true,\r\n      maxHeight: 400,\r\n      pageTotal: 0,\r\n      pageSize: 10,\r\n      pageNum: 1,\r\n      tableHead: [\r\n        { label: '车辆品牌', prop: 'vehicleBrand' },\r\n        { label: '车辆名称', prop: 'vehicleName' },\r\n        { label: '车辆类型', prop: 'vehicleType' },\r\n        { label: '燃料类型', prop: 'fuelType' },\r\n        { label: '车型级别', prop: 'vehicleLevel' },\r\n        { label: '总成名称', prop: 'assemblyName' },\r\n        { label: '零部件名称', prop: 'sparePartsName' },\r\n        { label: '零部件供应商', width: '120px', prop: 'sparePartsSupplier' },\r\n        { label: '零部件重量', prop: 'sparePartsWeight' },\r\n        { label: '零部件用材', prop: 'sparePartsMaterial' },\r\n      ],\r\n\r\n      operationArr: [\r\n        { icon: \"el-icon-edit-outline\", title: '编辑', size: 'small' },\r\n        { icon: \"el-icon-delete\", title: '删除', size: 'small' }\r\n      ],\r\n      ruleForm: [\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '车辆品牌',\r\n          name: 'vehicleBrand',\r\n          value: '',\r\n          rules: [\r\n            { required: true, message: '请输入邮箱地址', trigger: 'blur' },\r\n            { message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] }\r\n          ]\r\n        },\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '车辆名称',\r\n          name: 'vehicleName',\r\n          value: ''\r\n        },\r\n        {\r\n          show: true,\r\n          type: '2',\r\n          label: '车辆类型',\r\n          name: 'vehicleType',\r\n          value: '',\r\n          data: [\r\n            { label: '轿车', value: '轿车' },\r\n            { label: 'SUV', value: 'SUV' },\r\n            { label: 'MPV', value: 'MPV' }\r\n          ]\r\n        },\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '燃料类型',\r\n          name: 'fuelType',\r\n          value: '',\r\n          data: [\r\n            { label: '燃油', value: '燃油' },\r\n            { label: '纯电', value: '纯电' },\r\n            // { label: 'MPV', value: 'MPV' }\r\n          ]\r\n        },\r\n        {\r\n          show: true,\r\n          type: '2',\r\n          label: '车辆级别',\r\n          name: 'vehicleLevel',\r\n          value: '',\r\n          data: [\r\n            { label: 'AO', value: 'AO' },\r\n            { label: 'A', value: 'A' },\r\n            { label: 'B', value: 'B' },\r\n            { label: 'C', value: 'C' },\r\n            { label: 'D', value: 'D' }\r\n          ]\r\n        },\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '总成名称',\r\n          name: 'assemblyName',\r\n          value: ''\r\n        },\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '零部件名称',\r\n          name: 'sparePartsName',\r\n          value: ''\r\n        },\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '零部件供应商',\r\n          name: 'sparePartsSupplier',\r\n          value: ''\r\n        },\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '零部件重量',\r\n          name: 'sparePartsWeight',\r\n          value: ''\r\n        },\r\n        {\r\n          show: true,\r\n          type: '1',\r\n          label: '零部件用材',\r\n          name: 'sparePartsMaterial',\r\n          value: ''\r\n        }\r\n      ],\r\n      rules: {\r\n        vehicleBrand: [{ required: true, message: '请输入车辆品牌', trigger: 'blur' }],\r\n        vehicleName: [{ required: true, message: '请输入车辆名称', trigger: 'blur' }],\r\n        vehicleType: [{ required: true, message: '请输入车辆类型', trigger: 'blur' }],\r\n        fuelType: [{ required: true, message: '请输入燃料类型', trigger: 'blur' }],\r\n        vehicleLevel: [{ required: true, message: '请输入车辆级别', trigger: 'blur' }],\r\n        assemblyName: [{ required: true, message: '请输入总成名称', trigger: 'blur' }],\r\n        sparePartsName: [{ required: true, message: '请输入零部件名称', trigger: 'blur' }],\r\n        sparePartsSupplier: [{ required: true, message: '请输入零部件供应商', trigger: 'blur' }],\r\n        sparePartsWeight: [{ required: true, message: '请输入零部件重量', trigger: 'blur' }],\r\n        sparePartsMaterial: [{ required: true, message: '请输入零部件用材', trigger: 'blur' }]\r\n      },\r\n      ids: [],\r\n      isCreate: true\r\n    }\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this.getData()\r\n\r\n    }, 1000)\r\n  },\r\n  methods: {\r\n    download () {\r\n      // 192.168.144.210:8007\r\n      location.href = 'http://192.168.144.210:8160/api/material/vehicleMaterial/download'\r\n      // location.href = 'http://10.10.10.12:8007/api/material/vehicleMaterial/download'\r\n\r\n      // httprequest.get('/material/vehicleMaterial/download', {}, res => {\r\n      //   console.log('测试下载', res)\r\n      // })\r\n    },\r\n    // 选择\r\n    selctionChose (val) {\r\n      console.log('测试这个val', val)\r\n      let _this = this\r\n      // val.forEach(res => {\r\n      //   if (_this.ids === '') {\r\n      //     _this.ids = res.id\r\n      //   } else {\r\n      //     _this.ids += `,${res.id}`\r\n      //   }\r\n      // })\r\n      _this.ids = val.map(res => {\r\n        return res.id\r\n      })\r\n    },\r\n    // 点击按钮\r\n    clickButton (name, title, index, row) {\r\n      console.log('测试这个name,index，row', name, title, index, row)\r\n      switch (title) {\r\n        case '编辑':\r\n          this.isCreate = false\r\n          this.getinformation(row.id)\r\n          this.showFormDialog()\r\n          break\r\n        case '删除':\r\n          this.deleteAll([row.id])\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n\r\n    // delete删除\r\n    deleteAll (res) {\r\n      let _this = this\r\n      let option = res\r\n      // {\r\n      //   ids: res\r\n      // }\r\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        httprequest.delete('/material/vehicleMaterial', option, res => {\r\n          if (res.data.ok) {\r\n            _this.$message.success('删除成功')\r\n            _this.getData()\r\n          } else {\r\n            _this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n\r\n\r\n    },\r\n    createForm () {\r\n      this.isCreate = true\r\n      this.showFormDialog()\r\n    },\r\n    // 编辑\r\n    edit (val) {\r\n      let _this = this\r\n      let options = val\r\n      let reg = /^\\d+(\\.\\d+)?$/\r\n      if (!reg.test(options.sparePartsWeight)) {\r\n        _this.$message.error('零部件重量必须为数字')\r\n      } else {\r\n        //  {\r\n        //   vehicleMaterialCompar: \r\n        // }\r\n        httprequest.put('/material/vehicleMaterial', options, res => {\r\n          if (res.data.ok) {\r\n            _this.$message.success('修改成功')\r\n            _this.$refs.fromDialog.closeDialog()\r\n            _this.getData()\r\n\r\n          } else {\r\n            _this.$message.error(res.message)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 获取详情\r\n    getinformation (id) {\r\n      let _this = this  // material/vehicleMaterial/{id}\r\n      _this.ruleForm.id = {\r\n        show: false,\r\n        type: '1',\r\n        label: 'id',\r\n        name: 'id',\r\n        value: ''\r\n      }\r\n      _this.$nextTick(() => {\r\n\r\n        httprequest.get(`/material/vehicleMaterial/${id}`, {}, res => {\r\n          if (res.data.ok) {\r\n            Object.keys(res.data.data).forEach(item => {\r\n              Object.keys(_this.ruleForm).forEach(response => {\r\n                if (item === response) {\r\n                  _this.ruleForm[response].value = res.data.data[response]\r\n                }\r\n              })\r\n\r\n            })\r\n\r\n          }\r\n        })\r\n      })\r\n    },\r\n    // 新增\r\n    create (val) {\r\n      let _this = this\r\n      let option = val\r\n      let reg = /^\\d+(\\.\\d+)?$/\r\n      if (!reg.test(option.sparePartsWeight)) {\r\n        _this.$message.error('零部件重量必须为数字')\r\n      } else {\r\n        httprequest.post('/material/vehicleMaterial', option, res => {\r\n          if (res.data.ok) {\r\n            _this.$message.success('添加成功')\r\n            _this.$refs.fromDialog.closeDialog()\r\n            _this.getData()\r\n          } else {\r\n            _this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }\r\n      // /^\\d$/\r\n      //  {\r\n      //   vehicleMaterialCompar:      }\r\n\r\n    },\r\n    // 显示新建\r\n    showFormDialog () {\r\n      this.$refs.fromDialog.showDialog()\r\n    },\r\n    // 查询分页\r\n    getData () {\r\n      // /material/vehicleMaterial/page\r\n      let _this = this\r\n      let options = {\r\n        \"current\": _this.pageNum,\r\n        \"size\": _this.pageSize\r\n      }\r\n      httprequest.post('/material/vehicleMaterial/page', options, res => {\r\n        console.log('测试res', res)\r\n        if (res.data.ok) {\r\n          console.log('测试数据', res.data.data.records)\r\n          if (res.data.data.records.length === 0) {\r\n            if (_this.pageNum > 1) {\r\n              _this.pageNum - 1\r\n              _this.getData()\r\n            } else if (_this.pageNum === 1) {\r\n              _this.pageNum = 1\r\n            } else {\r\n              _this.pageNum = 1\r\n              _this.getData()\r\n            }\r\n\r\n          }\r\n          _this.tableData = res.data.data.records\r\n          _this.pageTotal = res.data.data.total\r\n        }\r\n      })\r\n    },\r\n    // 切换条数\r\n    changeNumber (val) {\r\n      let _this = this\r\n      _this.pageSize = val\r\n      _this.getData()\r\n    },\r\n    // 切换页码\r\n    changePage (val) {\r\n      let _this = this\r\n      _this.pageNum = val\r\n      _this.getData()\r\n    },\r\n    createImport (val) {\r\n      let _this = this\r\n      console.log('测试保存按钮', val)\r\n      _this.create(val)\r\n    },\r\n    // 上传文件\r\n    uploadFile (parment) {\r\n      let file = new FormData()\r\n      file.append('file', parment.file)\r\n      httprequest.postFile('/material/vehicleMaterial/importExcel', file, res => {\r\n        if (res.data.ok) {\r\n          this.$message.success(\"上传成功\")\r\n          this.pageSize = 10\r\n          this.pageNum = 1\r\n          this.getData()\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n#homePagePictures {\r\n  width: 96%;\r\n  height: 96%;\r\n  background: #ffffff;\r\n  margin: 0.5% auto;\r\n  .topShow {\r\n    height: 80px;\r\n    .topLeft {\r\n      float: left;\r\n      margin-left: 24px;\r\n      margin-top: 20px;\r\n    }\r\n    .topRight {\r\n      float: right;\r\n      margin-right: 24px;\r\n      margin-top: 20px;\r\n      .upload-demo {\r\n        float: left;\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}