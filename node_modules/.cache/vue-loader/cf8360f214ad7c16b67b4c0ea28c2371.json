{"remainingRequest":"E:\\zhongqiyan\\Material-Select-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\zhongqiyan\\Material-Select-Web\\src\\views\\Material\\material.vue?vue&type=style&index=0&id=9a5c79b6&lang=scss&scoped=true&","dependencies":[{"path":"E:\\zhongqiyan\\Material-Select-Web\\src\\views\\Material\\material.vue","mtime":1592903770037},{"path":"E:\\zhongqiyan\\Material-Select-Web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\Material-Select-Web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\Material-Select-Web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\Material-Select-Web\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\Material-Select-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\zhongqiyan\\Material-Select-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI21hdGVyaWFsIHsNCiAgd2lkdGg6IDEwMCU7DQogIC5tYXRlcmlhbFRvcCB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICBwYWRkaW5nOiAyMHB4Ow0KICAgIC50b3BCdXR0b25zIHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBmbGV4LXdyYXA6IG5vd3JhcDsNCiAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7DQogICAgfQ0KICB9DQogIC50YWJsZVNob3cgew0KICAgIHdpZHRoOiA5NiU7DQogICAgbWFyZ2luOiBhdXRvOw0KICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICAudGFibGVUaXRsZSB7DQogICAgICB3aWR0aDogOTYlOw0KICAgICAgbWFyZ2luOiBhdXRvOw0KICAgICAgaGVpZ2h0OiA0MHB4Ow0KICAgICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["material.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"material.vue","sourceRoot":"src/views/Material","sourcesContent":["<template>\r\n  <div id=\"material\">\r\n    <el-row class=\"materialTop\">\r\n      <div class=\"topForm\">\r\n        <el-form :inline=\"true\"\r\n                 ref=\"searchForm\"\r\n                 :model=\"searchForm\">\r\n          <el-form-item label=\"材料牌号:\">\r\n            <el-input v-model=\"searchForm.clph\"\r\n                      placeholder=\"\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"材料类型:\">\r\n            <el-input v-model=\"searchForm.cllx\"\r\n                      placeholder=\"\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"材料名称:\">\r\n            <el-input v-model=\"searchForm.clmc\"\r\n                      placeholder=\"\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-checkbox-group v-model=\"searchForm.type\">\r\n              <el-checkbox label=\"物化性能\"\r\n                           name=\"type\"></el-checkbox>\r\n              <el-checkbox label=\"力学性能\"\r\n                           name=\"type\"></el-checkbox>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div class=\"topButtons\">\r\n        <el-button type=\"primary\"\r\n                   @click=\"queryButton\">近似检索</el-button>\r\n        <el-button type=\"primary\"\r\n                   plain\r\n                   @click=\"showQuery\">显示查询条件</el-button>\r\n        <!-- <el-button type=\"primary\"\r\n                   plain\r\n                   @click=\"similarButton\">近似检索</el-button> -->\r\n        <el-button plain\r\n                   @click=\"resetButton\">重置</el-button>\r\n      </div>\r\n    </el-row>\r\n    <el-row class=\"tableShow\">\r\n      <div class=\"tableTitle\">\r\n        <span>材料列表</span>\r\n      </div>\r\n      <componentsTable :tableSelection=\"showSelection\"\r\n                       :tableData=\"tableData\"\r\n                       :operation='operation'\r\n                       :operationWidth=\"operationWidth\"\r\n                       :tableIndex=\"tableIndex\"\r\n                       :tableHead=\"tableHead\"\r\n                       :border=\"true\"\r\n                       :pageTotal=\"pageTotal\"\r\n                       :maxHeight=\"maxHeight\"\r\n                       :operationArr=\"operationArr\"\r\n                       @choseselection=\"selctionChose\"\r\n                       @changnum='changeNumber'\r\n                       @changpage=\"changePage\"\r\n                       @buttonclick=\"clickButton\"></componentsTable>\r\n    </el-row>\r\n    <queryConditions ref=\"queryDialog\"\r\n                     @resoption=\"responseOption\"></queryConditions>\r\n    <el-dialog title=\"详情\"\r\n               :visible=\"detailsShow\"\r\n               :before-close=\"closeDetails\">\r\n      <componentsTable :tableSelection=\"false\"\r\n                       :tableData=\"detailData\"\r\n                       :operation='false'\r\n                       :tableIndex=\"true\"\r\n                       :tableHead=\"detailsHead\"\r\n                       :border=\"true\"\r\n                       :maxHeight=\"maxHeight\"\r\n                       :pagination=\"false\">\r\n      </componentsTable>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport componentsTable from '@/components/table/componentsTable'\r\nimport queryConditions from '@/components/dialog/queryConditions'\r\nimport httprequest from '@/assets/api/request'\r\n\r\nexport default {\r\n  components: { componentsTable, queryConditions },\r\n  data () {\r\n    return {\r\n      searchForm: { clph: '', cllx: '', clmc: '', type: [] },\r\n      tableData: [],\r\n      showSelection: true,\r\n      operation: true,\r\n      operationWidth: 130,\r\n      tableIndex: true,\r\n      maxHeight: 300,\r\n      pageTotal: 0,\r\n      pageSize: 10,\r\n      pageNum: 1,\r\n      tableHead: [\r\n        { label: '材料牌号', prop: 'clph' },\r\n        { label: '材料类型', prop: 'cllxmc' },\r\n        { label: '材料名称', prop: 'clmc' },\r\n        { label: '材料供应商', prop: 'gysmc' },\r\n        // { label: '查看详情', prop: 'vehicleLevel' }\r\n      ],\r\n      operationArr: [\r\n        { icon: \"el-icon-edit-outline\", name: '详情', title: '详情', size: 'small' },\r\n      ],\r\n      seniorOption: [],\r\n      detailsShow: false,\r\n      detailsHead: [\r\n        { label: '材料ID', prop: 'clId' },\r\n        { label: '材料牌号', prop: 'clph' },\r\n        { label: '材料类型', prop: 'cllxmc' },\r\n        { label: '材料名称', prop: 'clmc' },\r\n        { label: '材料供应商', prop: 'gysmc' },\r\n        // { label: '查看详情', prop: 'vehicleLevel' }\r\n      ],\r\n      detailData: []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    // 选择表格\r\n    selctionChose (val) {\r\n      console.log(val)\r\n    },\r\n    // changeNumber\r\n    changeNumber (val) {\r\n      console.log(val)\r\n      let _this = this\r\n      _this.pageSize = val\r\n      if (_this.searchForm.type.length > 0) {\r\n        _this.getSeniorList()\r\n      } else {\r\n        _this.getList()\r\n      }\r\n    },\r\n    //@changpage=\"changePage\"\r\n    changePage (val) {\r\n      console.log(val)\r\n      let _this = this\r\n      _this.pageNum = val\r\n      if (_this.searchForm.type.length > 0) {\r\n        _this.getSeniorList()\r\n      } else {\r\n        _this.getList()\r\n      }\r\n    },\r\n    // 显示查询条件\r\n    showQuery () {\r\n      let _this = this\r\n      _this.$refs.queryDialog.showQueryDialog()\r\n    },\r\n    //获取列表数据\r\n    getList () {\r\n      let _this = this\r\n      let options = {\r\n        cllxmc: _this.searchForm.cllx === '' ? null : _this.searchForm.cllx,\r\n        clmc: _this.searchForm.clmc === '' ? null : _this.searchForm.clmc,\r\n        clph: _this.searchForm.clph === '' ? null : _this.searchForm.clph,\r\n        current: _this.pageNum,\r\n        size: _this.pageSize\r\n      }\r\n      httprequest.post('material/clxx/search', options, res => {\r\n        console.log('测试近似查询', res)\r\n        if (res.data.ok) {\r\n          _this.tableHead.forEach((res, index) => {\r\n            if (res.label === '近似度') {\r\n              _this.tableHead.splice(index, 1)\r\n            }\r\n          })\r\n          _this.tableData = res.data.data.records\r\n          _this.pageTotal = res.data.data.total\r\n        }\r\n      })\r\n    },\r\n    // 高级检索获取数据\r\n    getSeniorList () {\r\n      let _this = this\r\n      let trueOrFalse = true\r\n\r\n      let cc = {\r\n        wh: [],\r\n        lx: []\r\n      }\r\n      let options = {\r\n        cllxmc: _this.searchForm.cllx === '' ? null : _this.searchForm.cllx,\r\n        clmc: _this.searchForm.clmc === '' ? null : _this.searchForm.clmc,\r\n        clph: _this.searchForm.clph === '' ? null : _this.searchForm.clph,\r\n        current: _this.pageNum,\r\n        size: _this.pageSize,\r\n        queryVOS: []\r\n      }\r\n      console.log('_this.seniorOption', _this.seniorOption)\r\n      if (_this.seniorOption.length > 0) {\r\n        _this.searchForm.type.forEach(res => {\r\n          if (res === '物化性能') {\r\n            cc.wh = _this.seniorOption.filter(re =>\r\n              re.csPid === 'XN_WHXN'\r\n            )\r\n            let c = _this.seniorOption.filter(re =>\r\n              re.csPid === 'XN_WHXN'\r\n            )\r\n            console.log('测试c', c)\r\n          } else {\r\n            cc.lx = _this.seniorOption.filter(re =>\r\n              re.csPid === 'XN_LXXN'\r\n            )\r\n          }\r\n        })\r\n        console.log('测试这个', cc.wh, cc.lx)\r\n        options.queryVOS = [...cc.wh, ...cc.lx]\r\n        options.queryVOS.forEach(res => {\r\n          // res.equ === '' ? delete res.equ : res.equ = Number(res.equ)\r\n          // res.max === '' ? delete res.max : res.max = Number(res.max)\r\n          // res.min === \"\" ? delete res.min : res.min = Number(res.min)\r\n          let c = res.csPid === 'XN_WHXN' ? '物化性能' : '力学性能'\r\n          if (res.equ !== '') {\r\n            delete res.max\r\n            delete res.min\r\n            res.equ = Number(res.equ)\r\n            trueOrFalse = true\r\n          } else if (res.equ === '' && res.max !== '' && res.min !== \"\") {\r\n            delete res.equ\r\n            res.max = Number(res.max)\r\n            res.min = Number(res.min)\r\n            trueOrFalse = true\r\n          } else if (res.equ === '' && res.max === '' && res.min !== \"\") {\r\n            _this.$message.error(`${c}【${res.csName}】最大值不能为空`)\r\n            trueOrFalse = false\r\n          } else if (res.equ === '' && res.max !== '' && res.min === \"\") {\r\n            _this.$message.error(`${c}【${res.csName}】最小值不能为空`)\r\n            trueOrFalse = false\r\n          } else if (res.equ === '' && res.max === '' && res.min === \"\") {\r\n\r\n            _this.$message.error(`${c}【${res.csName}】请输入参数`)\r\n            trueOrFalse = false\r\n          }\r\n        })\r\n        if (trueOrFalse) {\r\n          httprequest.post('/material/clxx/searchList', options, res => {\r\n            console.log('测试近似查询', res)\r\n            if (res.data.ok) {\r\n              // approximation\r\n              _this.tableHead.push({ label: '近似度', prop: 'approximation' })\r\n              let hash = {};\r\n              _this.tableHead = _this.tableHead.reduce((item, next) => {\r\n                hash[next.label] ? '' : hash[next.label] = true && item.push(next);\r\n                return item\r\n              }, [])\r\n              _this.tableData = res.data.data.records\r\n              _this.pageTotal = res.data.data.total\r\n            }\r\n          })\r\n        }\r\n\r\n      } else {\r\n        _this.$message.error('请选择查询条件')\r\n      }\r\n    },\r\n    // 查询按钮\r\n    queryButton () {\r\n      let _this = this\r\n      console.log('测试这个type', _this.searchForm.type)\r\n      if (_this.searchForm.type.length > 0) {\r\n        _this.getSeniorList()\r\n      } else {\r\n        _this.getList()\r\n      }\r\n    },\r\n    // 近似检测\r\n    similarButton () {\r\n      let _this = this\r\n      console.log('测试这个type', _this.searchForm.type)\r\n      if (_this.searchForm.type.length > 0) {\r\n        _this.getSeniorList()\r\n      } else {\r\n        _this.getList()\r\n      }\r\n\r\n    },\r\n    // 返回数据列表\r\n    responseOption (res) {\r\n      this.seniorOption = res\r\n    },\r\n    // 重置按钮\r\n    resetButton () {\r\n      let _this = this\r\n      _this.searchForm.clph = ''\r\n      _this.searchForm.cllx = ''\r\n      _this.searchForm.clmc = ''\r\n      _this.searchForm.type = []\r\n    },\r\n    // 详情按钮\r\n    clickButton (name, title, index, row) {\r\n      console.log('测试这个按钮', name, title, index, row)\r\n      let _this = this\r\n      // let option = {\r\n      //   id: row.id\r\n      // }\r\n      httprequest.get(`material/clxx/${row.clId}`, {}, res => {\r\n        console.log('加入比对', res)\r\n        if (res.data.ok) {\r\n          console.log('测试rs', res)\r\n          _this.detailsShow = true\r\n          _this.detailData = [res.data.data]\r\n        } else {\r\n          _this.$message.error(res.data.message)\r\n        }\r\n      })\r\n      // _this.ids.push(row.id)\r\n      // _this.contrasData.push(row)\r\n    },\r\n    // 关闭详情\r\n    closeDetails () {\r\n      this.detailsShow = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n#material {\r\n  width: 100%;\r\n  .materialTop {\r\n    width: 100%;\r\n    background: #ffffff;\r\n    padding: 20px;\r\n    .topButtons {\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n      justify-content: flex-end;\r\n    }\r\n  }\r\n  .tableShow {\r\n    width: 96%;\r\n    margin: auto;\r\n    background: #ffffff;\r\n    margin-top: 20px;\r\n    .tableTitle {\r\n      width: 96%;\r\n      margin: auto;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      background: #ffffff;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}